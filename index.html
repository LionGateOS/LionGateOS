<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LionGateOS – Shell Preview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #05060a;
      --bg-elevated: #0b0e16;
      --bg-elevated-2: #111524;
      --accent: #4b8bff;
      --accent-soft: rgba(75, 139, 255, 0.12);
      --accent-strong: rgba(75, 139, 255, 0.3);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --border-strong: rgba(255, 255, 255, 0.16);
      --text: #f5f7ff;
      --text-soft: #a0a4b8;
      --text-soft-2: #70748a;
      --danger: #ff5573;
      --ok: #55e2a8;
      --radius-lg: 18px;
      --radius-xl: 24px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.6);
      --shadow-subtle: 0 10px 25px rgba(0, 0, 0, 0.35);
      --blur: 18px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: #05060a;
      color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    body {
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 18px;
    }

    .shell-frame {
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 1440px;
      height: 100%;
      max-height: 860px;
      border-radius: 32px;
      background: linear-gradient(145deg, rgba(255,255,255,0.02), rgba(0,0,0,0.8));
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      position: relative;
      backdrop-filter: blur(22px) saturate(150%);
    }

    /* Top bar */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.07);
      background: #05060a;
    }

    .top-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .traffic-dots {
      display: flex;
      gap: 6px;
      margin-right: 8px;
    }

    .traffic-dots span {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: #05060a;
      opacity: 0.85;
    }

    .traffic-dots span:nth-child(1) { background-color: #ff5f57; }
    .traffic-dots span:nth-child(2) { background-color: #febc2e; }
    .traffic-dots span:nth-child(3) { background-color: #28c840; }

    .logo-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 5px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: #05060a;
      box-shadow: 0 10px 25px rgba(0,0,0,0.45);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-soft);
    }

    .logo-mark {
      width: 16px;
      height: 16px;
      border-radius: 6px;
      background: conic-gradient(from 220deg, #4b8bff, #7a5cff, #ff6ec7, #4b8bff);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 1px rgba(5, 6, 10, 0.9), 0 0 20px rgba(75, 139, 255, 0.85);
      position: relative;
    }

    .logo-mark::after {
      content: "";
      width: 9px;
      height: 9px;
      border-radius: 3px;
      background: #05060a;
    }

    .top-center {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .workspace-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(1, 4, 12, 0.85);
      font-size: 11px;
      color: var(--text-soft);
    }

    .workspace-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #05060a;
      box-shadow: 0 0 8px rgba(85, 226, 168, 0.7);
    }

    .top-search {
      min-width: 260px;
      max-width: 360px;
      flex: 1;
      margin-left: 8px;
    }

    .search-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.16);
      background: #05060a;
      padding: 6px 12px;
      font-size: 13px;
      color: var(--text);
      outline: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .search-input input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: inherit;
      font-size: inherit;
    }

    .search-kbd {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(1,1,4,0.85);
      color: var(--text-soft-2);
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .top-right .pill {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(3,4,12,0.9);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .avatar {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      background: #05060a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
      color: #020617;
      box-shadow: 0 0 0 1px rgba(15,23,42,0.7);
    }

    .clock {
      font-variant-numeric: tabular-nums;
      color: var(--text-soft-2);
    }

    /* Main area */
    .main-area {
      flex: 1;
      display: grid;
      grid-template-columns: 230px minmax(0, 1.7fr) minmax(0, 1.1fr);
      gap: 12px;
      padding: 12px;
      background: #05060a;
    }

    @media (max-width: 1100px) {
      .main-area {
        grid-template-columns: 210px minmax(0, 1fr);
        grid-template-rows: minmax(0, 1fr) minmax(0, 0.9fr);
        grid-template-areas:
          "nav main"
          "nav side";
      }

      .nav-pane { grid-area: nav; }
      .main-pane { grid-area: main; }
      .side-pane { grid-area: side; }
    }

    @media (max-width: 880px) {
      body {
        padding: 8px;
      }

      .shell-frame {
        border-radius: 18px;
      }

      .main-area {
        grid-template-columns: minmax(0,1fr);
        grid-template-rows: auto auto auto;
      }
    }

    .pane {
      border-radius: var(--radius-xl);
      background: #05060a;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-subtle);
      padding: 12px;
      position: relative;
      overflow: hidden;
    }

    .pane-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      padding-bottom: 6px;
      border-bottom: 1px dashed rgba(255,255,255,0.08);
    }

    .pane-title {
      font-size: 12px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .pane-subtitle {
      font-size: 11px;
      color: var(--text-soft-2);
      margin-top: 2px;
    }

    .pill-soft {
      border-radius: 999px;
      padding: 3px 8px;
      font-size: 11px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(8,10,20,0.9);
      color: var(--text-soft-2);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-soft-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #05060a;
    }

    /* Navigation pane */
    .nav-pane {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .nav-section-label {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-soft-2);
      margin-bottom: 4px;
      padding: 0 2px;
    }

    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 7px 9px;
      border-radius: 10px;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.14s ease-out;
      font-size: 13px;
      color: var(--text-soft);
      background: transparent;
    }

    .nav-item-main {
      display: flex;
      align-items: center;
      gap: 7px;
    }

    .nav-icon {
      width: 18px;
      height: 18px;
      border-radius: 7px;
      background: rgba(15,23,42,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
    }

    .nav-item-label {
      display: flex;
      flex-direction: column;
    }

    .nav-item-label span:first-child {
      font-size: 12px;
      color: var(--text);
    }

    .nav-item-label span:last-child {
      font-size: 10px;
      color: var(--text-soft-2);
    }

    .nav-item-badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(8,10,20,0.9);
      color: var(--text-soft-2);
    }

    .nav-item[data-active="true"] {
      border-color: var(--accent-strong);
      background: #05060a;
      box-shadow: 0 0 0 1px rgba(148, 163, 255, 0.25), 0 18px 40px rgba(15,23,42,0.9);
      transform: translateY(-0.5px);
      color: var(--text);
    }

    .nav-item[data-active="true"] .nav-item-label span:last-child {
      color: rgba(219, 234, 254, 0.9);
    }

    .nav-item[data-active="true"] .nav-icon {
      background: #05060a;
    }

    .nav-footer {
      margin-top: auto;
      padding-top: 8px;
      border-top: 1px dashed rgba(255,255,255,0.09);
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 11px;
      color: var(--text-soft-2);
    }

    .status-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .status-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: #05060a;
      box-shadow: 0 0 10px rgba(34,197,94,0.9);
    }

    .status-dot.warn {
      background: #05060a;
      box-shadow: 0 0 10px rgba(249,115,22,0.9);
    }

    /* Main pane (canvas) */
    .main-pane {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .canvas-card {
      border-radius: var(--radius-xl);
      background: #05060a;
      border: 1px solid rgba(148,163,255,0.24);
      box-shadow: 0 22px 60px rgba(15,23,42,0.95);
      padding: 14px 14px 16px;
      position: relative;
      overflow: hidden;
    }

    .canvas-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .canvas-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .canvas-title {
      font-size: 16px;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      color: #e5edff;
    }

    .canvas-subtitle {
      font-size: 12px;
      color: var(--text-soft);
    }

    .canvas-tags {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .tag {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      background: rgba(15,23,42,0.8);
      color: #c7d2fe;
    }

    .canvas-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 12px;
    }

    .callout-card {
      border-radius: 18px;
      padding: 10px 12px;
      background: #05060a;
      border: 1px solid rgba(129,140,248,0.65);
      box-shadow: 0 16px 35px rgba(15,23,42,0.95);
      position: relative;
      overflow: hidden;
    }

    .callout-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(191, 219, 254, 0.9);
      margin-bottom: 4px;
    }

    .callout-title {
      font-size: 18px;
      color: #e5edff;
      margin-bottom: 4px;
    }

    .callout-body {
      font-size: 12px;
      color: #cbd5f5;
      max-width: 480px;
    }

    .callout-footer {
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .primary-button, .ghost-button {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text);
      transition: all 0.14s ease-out;
    }

    .primary-button {
      background: linear-gradient(135deg, #4f46e5, #0ea5e9);
      border-color: rgba(191, 219, 254, 0.9);
      box-shadow: 0 16px 45px rgba(56, 189, 248, 0.6);
    }

    .primary-button:hover {
      transform: translateY(-0.5px) scale(1.01);
      box-shadow: 0 18px 55px rgba(56,189,248,0.75);
    }

    .ghost-button {
      border-color: rgba(191, 219, 254, 0.3);
      background: rgba(15,23,42,0.85);
      color: rgba(226,232,240,0.9);
    }

    .ghost-button:hover {
      border-color: rgba(191, 219, 254, 0.6);
      background: rgba(15,23,42,0.95);
    }

    .canvas-metrics {
      border-radius: 18px;
      padding: 10px 12px;
      background: #05060a;
      border: 1px solid rgba(148,163,255,0.4);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .metric-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-soft-2);
    }

    .metric-label {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .metric-label span.dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: #05060a;
    }

    .metric-label span.dot.ok {
      background: #05060a;
    }

    .metric-label span.dot.warn {
      background: #05060a;
    }

    .metric-value {
      font-variant-numeric: tabular-nums;
      color: #e5e7eb;
    }

    .metric-pill {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.5);
      background: rgba(15,23,42,0.9);
      color: #c7d2fe;
    }

    .canvas-footer-note {
      margin-top: 8px;
      font-size: 10px;
      color: var(--text-soft-2);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Quick launch */
    .quick-launch {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
      margin-top: 10px;
    }

    @media (max-width: 1100px) {
      .quick-launch {
        grid-template-columns: repeat(3, minmax(0,1fr));
      }
    }

    @media (max-width: 780px) {
      .quick-launch {
        grid-template-columns: repeat(2, minmax(0,1fr));
      }
    }

    .quick-tile {
      border-radius: 14px;
      padding: 9px 10px;
      background: #05060a;
      border: 1px solid rgba(148,163,255,0.4);
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.15s ease-out;
    }

    .quick-tile:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 35px rgba(15,23,42,0.95);
      border-color: rgba(191,219,254,0.85);
    }

    .quick-tile-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .quick-tile-title {
      font-size: 11px;
      color: #e5edff;
    }

    .quick-tile-tag {
      font-size: 9px;
      padding: 2px 5px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      background: rgba(15,23,42,0.9);
      color: rgba(219,234,254,0.9);
    }

    .quick-tile-sub {
      font-size: 10px;
      color: var(--text-soft-2);
    }

    /* Side pane */
    .side-pane {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .stack {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .mini-card {
      border-radius: 16px;
      padding: 9px 10px;
      background: #05060a;
      border: 1px solid rgba(148,163,255,0.3);
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }

    .mini-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .mini-title {
      font-size: 11px;
      color: #e5e7eb;
    }

    .mini-pill {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.6);
      background: rgba(15,23,42,0.9);
      color: #c7d2fe;
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .timeline-item {
      display: flex;
      gap: 8px;
      align-items: flex-start;
    }

    .timeline-marker {
      width: 8px;
      margin-top: 3px;
    }

    .timeline-marker-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #05060a;
      box-shadow: 0 0 10px rgba(129,140,248,0.9);
    }

    .timeline-content {
      flex: 1;
      font-size: 10px;
    }

    .timeline-title {
      color: #e5e7eb;
    }

    .timeline-meta {
      color: var(--text-soft-2);
      margin-top: 1px;
    }

    .mini-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 6px;
    }

    .mini-stat {
      border-radius: 12px;
      padding: 6px 7px;
      background: rgba(15,23,42,0.92);
      border: 1px solid rgba(148,163,255,0.26);
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .mini-stat-label {
      font-size: 10px;
      color: var(--text-soft-2);
    }

    .mini-stat-value {
      font-size: 12px;
      color: #e5e7eb;
      font-variant-numeric: tabular-nums;
    }

    .mini-stat-foot {
      font-size: 10px;
      color: #a5b4fc;
    }

    /* Status bar */
    .status-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 14px;
      border-top: 1px solid rgba(255,255,255,0.08);
      background: #05060a;
      font-size: 11px;
      color: var(--text-soft-2);
    }

    .status-bar-left,
    .status-bar-right {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .status-pill {
      border-radius: 999px;
      padding: 2px 7px;
      border: 1px solid rgba(148,163,255,0.4);
      background: rgba(15,23,42,0.92);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: rgba(226,232,240,0.9);
    }

    .status-pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #05060a;
      box-shadow: 0 0 10px rgba(34,197,94,0.85);
    }

    /* Command palette overlay */
    .command-overlay {
      position: absolute;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: #05060a;
      backdrop-filter: blur(22px);
      z-index: 22;
    }

    .command-overlay[data-open="true"] {
      display: flex;
    }

    .command-panel {
      width: min(640px, 100% - 32px);
      border-radius: 24px;
      background: #05060a;
      border: 1px solid rgba(148,163,255,0.7);
      box-shadow: 0 26px 70px rgba(15,23,42,1);
      padding: 12px 12px 10px;
    }

    .command-input-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,255,0.68);
      background: #05060a;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .command-input-row input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: #e5e7eb;
      font-size: inherit;
    }

    .command-input-row span.hint {
      font-size: 11px;
      color: #a5b4fc;
    }

    .command-hint-row {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--text-soft-2);
      margin-bottom: 6px;
    }

    .command-list {
      border-radius: 18px;
      border: 1px solid rgba(51,65,85,0.9);
      background: #05060a;
      max-height: 260px;
      overflow: auto;
    }

    .command-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 7px 9px;
      font-size: 12px;
      cursor: pointer;
      border-bottom: 1px solid rgba(15,23,42,0.9);
    }

    .command-item:last-child {
      border-bottom: none;
    }

    .command-item[data-active="true"] {
      background: linear-gradient(135deg, rgba(59,130,246,0.24), rgba(79,70,229,0.38));
    }

    .command-item-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .command-item-title {
      color: #e5e7eb;
    }

    .command-item-sub {
      color: var(--text-soft-2);
      font-size: 11px;
    }

    .command-item-kbd {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid rgba(148,163,255,0.6);
      background: rgba(15,23,42,0.95);
      color: #c7d2fe;
    }

    .command-footer {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--text-soft-2);
    }

  </style>
</head>
<body>
  <div class="shell-frame">
    <div class="command-overlay" id="commandOverlay" aria-hidden="true">
      <div class="command-panel" role="dialog" aria-modal="true" aria-label="Command palette">
        <div class="command-input-row">
          <span class="search-icon">⌘</span>
          <input id="commandInput" type="text" placeholder="Type a command or search (e.g. 'Open App Store')" />
          <span class="hint">Enter to run · Esc to close</span>
        </div>
        <div class="command-hint-row">
          <span>Command Center · LionGateOS Shell</span>
          <span>Workspace: Core Operating Environment</span>
        </div>
        <div class="command-list" id="commandList">
          <!-- Commands will be injected by JS -->
        </div>
        <div class="command-footer">
          <span>Tip: Start typing “theme”, “shell”, or “log”.</span>
          <span>F1 · View Shell Architecture Map (placeholder)</span>
        </div>
      </div>
    </div>

    <header class="top-bar">
      <div class="top-left">
        <div class="traffic-dots">
          <span></span><span></span><span></span>
        </div>
        <div class="logo-pill">
          <div class="logo-mark"></div>
          <span>LionGateOS</span>
        </div>
      </div>

      <div class="top-center">
        <div class="workspace-pill">
          <span class="workspace-dot"></span>
          <span>Core operating environment</span>
        </div>
        <div class="top-search">
          <div class="search-input" id="searchBar">
            <input type="text" placeholder="Search apps, workspaces, commands…" />
            <span class="search-kbd">Ctrl + K</span>
          </div>
        </div>
      </div>

      <div class="top-right">
        <div class="pill">
          <span class="clock" id="clock">--:--</span>
        </div>
        <div class="pill">
          <span>Stable · Shell α</span>
        </div>
        <div class="avatar">LG</div>
      </div>
    </header>

    <main class="main-area">
      <!-- Navigation pane -->
      <section class="pane nav-pane" id="navPane">
        <div class="pane-header">
          <div>
            <div class="pane-title">Navigation</div>
            <div class="pane-subtitle">Shell-level views & apps</div>
          </div>
          <div class="pill-soft">
            <span class="pill-soft-dot"></span>
            <span>Session: Clean</span>
          </div>
        </div>

        <div>
          <div class="nav-section-label">System</div>
          <div class="nav-list">
            <div class="nav-item" data-target="view-dashboard" data-active="true">
              <div class="nav-item-main">
                <div class="nav-icon">◎</div>
                <div class="nav-item-label">
                  <span>System overview</span>
                  <span>Core shell status & metrics</span>
                </div>
              </div>
              <span class="nav-item-badge">Home</span>
            </div>
            <div class="nav-item" data-target="view-workspaces">
              <div class="nav-item-main">
                <div class="nav-icon">▣</div>
                <div class="nav-item-label">
                  <span>Workspaces</span>
                  <span>Industry layouts & presets</span>
                </div>
              </div>
              <span class="nav-item-badge">Soon</span>
            </div>
            <div class="nav-item" data-target="view-apps">
              <div class="nav-item-main">
                <div class="nav-icon">⋯</div>
                <div class="nav-item-label">
                  <span>Shell apps</span>
                  <span>Core tools docked to OS</span>
                </div>
              </div>
              <span class="nav-item-badge">0 / modular</span>
            </div>
          </div>
        </div>

        <div style="margin-top: 12px;">
          <div class="nav-section-label">Control</div>
          <div class="nav-list">
            <div class="nav-item" data-target="view-theme">
              <div class="nav-item-main">
                <div class="nav-icon">✺</div>
                <div class="nav-item-label">
                  <span>Theme engine</span>
                  <span>Visual language, density, mood</span>
                </div>
              </div>
              <span class="nav-item-badge">Skeleton</span>
            </div>
            <div class="nav-item" data-target="view-branding">
              <div class="nav-item-main">
                <div class="nav-icon">⌘</div>
                <div class="nav-item-label">
                  <span>Branding</span>
                  <span>Logos, accents, default assets</span>
                </div>
              </div>
              <span class="nav-item-badge">Linked</span>
            </div>
            <div class="nav-item" data-target="view-settings">
              <div class="nav-item-main">
                <div class="nav-icon">⚙</div>
                <div class="nav-item-label">
                  <span>Shell settings</span>
                  <span>Behaviour, safety, defaults</span>
                </div>
              </div>
              <span class="nav-item-badge">Safe</span>
            </div>
          </div>
        </div>

        <div class="nav-footer">
          <div class="status-row">
            <span>Shell status</span>
            <span class="status-dot"></span>
          </div>
          <div class="status-row">
            <span>Update-pack mode</span>
            <span>Passive · Listening only</span>
          </div>
          <div class="status-row">
            <span>Last change</span>
            <span>Not yet committed</span>
          </div>
        </div>
      </section>

      <!-- Main canvas pane -->
      <section class="pane main-pane">
        <!-- Dashboard view -->
        <div class="canvas-card shell-view" id="view-dashboard">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Core operating environment</div>
              <div class="canvas-subtitle">High-level cockpit for LionGateOS · Shell α</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">Shell online</span>
              <span class="tag">Studio AI legacy · 0 detected</span>
              <span class="tag">Safe defaults</span>
            </div>
          </div>

          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Today’s focus</div>
              <div class="callout-title">Shape the OS shell, not just an app.</div>
              <div class="callout-body">
                This environment is the control surface for your entire industry workspace. 
                From here you will dock modular apps, switch visual themes, apply branded assets, 
                and ship update-packs without touching raw code.
              </div>
              <div class="callout-footer">
                <button class="primary-button" data-action="open-command">
                  <span>Open command center</span>
                  <span>Ctrl + K</span>
                </button>
                <button class="ghost-button" data-action="focus-nav-system">
                  <span>Highlight system navigation</span>
                </button>
              </div>
            </div>

            <div class="canvas-metrics">
              <div class="metric-row">
                <div class="metric-label">
                  <span class="dot ok"></span>
                  <span>Shell stability</span>
                </div>
                <div class="metric-value">Stable · α0.1</div>
              </div>
              <div class="metric-row">
                <div class="metric-label">
                  <span class="dot"></span>
                  <span>Legacy artifacts removed</span>
                </div>
                <div class="metric-value">Studio AI · 0</div>
              </div>
              <div class="metric-row">
                <div class="metric-label">
                  <span class="dot warn"></span>
                  <span>Apps docked to shell</span>
                </div>
                <div class="metric-value">0 / modular-ready</div>
              </div>
              <div class="metric-row">
                <div class="metric-label">
                  <span class="dot ok"></span>
                  <span>Theme engine link</span>
                </div>
                <div class="metric-value">Linked · Skeleton only</div>
              </div>
              <div class="metric-row">
                <span class="metric-pill">Git: Commit required after each update-pack</span>
              </div>
              <div class="canvas-footer-note">
                <span>Next step suggestion: Add first docked app (Dashboard / Notes / Estimator shell).</span>
                <span>All numbers above are placeholders for now – they become real once modules attach.</span>
              </div>
            </div>
          </div>

          <div class="quick-launch">
            <div class="quick-tile" data-target="view-workspaces">
              <div class="quick-tile-header">
                <span class="quick-tile-title">Workspace layouts</span>
                <span class="quick-tile-tag">Soon</span>
              </div>
              <div class="quick-tile-sub">
                Design “Industry Workspaces” shells: Sales, Estimating, PM, etc.
              </div>
            </div>
            <div class="quick-tile" data-target="view-apps">
              <div class="quick-tile-header">
                <span class="quick-tile-title">Dock an app</span>
                <span class="quick-tile-tag">0 attached</span>
              </div>
              <div class="quick-tile-sub">
                Decide which application becomes the first-class resident of the OS shell.
              </div>
            </div>
            <div class="quick-tile" data-target="view-theme">
              <div class="quick-tile-header">
                <span class="quick-tile-title">Tune the theme engine</span>
                <span class="quick-tile-tag">Skeleton</span>
              </div>
              <div class="quick-tile-sub">
                Lock in density, contrast, and core visual language for LionGateOS.
              </div>
            </div>
            <div class="quick-tile" data-target="view-branding">
              <div class="quick-tile-header">
                <span class="quick-tile-title">Attach branding pack</span>
                <span class="quick-tile-tag">Assets</span>
              </div>
              <div class="quick-tile-sub">
                Point the shell at your logo, wallpapers, and color primitives once ready.
              </div>
            </div>
          </div>
        </div>

        <!-- Workspaces view -->
        <div class="canvas-card shell-view" id="view-workspaces" style="display:none;">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Workspace switcher</div>
              <div class="canvas-subtitle">Future: dedicated layouts for each role in your industry.</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">Blueprint only</span>
              <span class="tag">No state yet</span>
            </div>
          </div>
          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Concept</div>
              <div class="callout-title">Think “desktops”, but role-based and industry-tuned.</div>
              <div class="callout-body">
                Each workspace will be a saved configuration of apps, panels, filters, and theme accents.
                For example: “Estimator cockpit”, “PM board”, “Owner overview”, “Field ops”.
                For now this is a static placeholder while we finish the shell foundation.
              </div>
              <div class="callout-footer">
                <button class="ghost-button" data-action="return-dashboard">
                  <span>Return to shell overview</span>
                </button>
              </div>
            </div>
            <div class="canvas-metrics">
              <div class="metric-row">
                <span class="metric-label"><span class="dot warn"></span>Workspaces configured</span>
                <span class="metric-value">0</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot"></span>Layouts planned</span>
                <span class="metric-value">4–6</span>
              </div>
              <div class="canvas-footer-note">
                <span>Once we stabilize the shell, this pane becomes a real switcher for workspace presets.</span>
                <span>Safe: all elements here are non-interactive placeholders right now.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Apps view -->
        <div class="canvas-card shell-view" id="view-apps" style="display:none;">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Shell apps</div>
              <div class="canvas-subtitle">Dock LionGateOS modules into the operating environment.</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">Modular-ready</span>
              <span class="tag">No apps linked yet</span>
            </div>
          </div>
          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Docking logic</div>
              <div class="callout-title">This is where “apps” become residents of the OS.</div>
              <div class="callout-body">
                In future steps, each app (Dashboard, Smart Estimator, Construction Suite, etc.) 
                will register itself with the shell and appear in this view as a controllable tile. 
                For now, this view simply declares the contract and keeps everything safe and static.
              </div>
              <div class="callout-footer">
                <button class="ghost-button" data-action="open-command">
                  <span>Open command center blueprint</span>
                </button>
              </div>
            </div>
            <div class="canvas-metrics">
              <div class="metric-row">
                <span class="metric-label"><span class="dot warn"></span>Docked apps</span>
                <span class="metric-value">0</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot"></span>Available modules</span>
                <span class="metric-value">To be defined</span>
              </div>
              <div class="canvas-footer-note">
                <span>Next steps: choose which application becomes the first “resident” of the shell.</span>
                <span>Everything here is wiring for later; you can’t break anything from this view.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Theme engine view -->
        <div class="canvas-card shell-view" id="view-theme" style="display:none;">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Theme engine · Shell hooks</div>
              <div class="canvas-subtitle">This OS shell is wired to a future theme engine, not a static palette.</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">Tokenized</span>
              <span class="tag">Engine pending</span>
            </div>
          </div>
          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Visual language</div>
              <div class="callout-title">Every color, radius, and shadow is a token.</div>
              <div class="callout-body">
                Even though this file is a single HTML for now, it is already structured around 
                design tokens instead of hard-coded values. When the dedicated Theme Engine goes live, 
                it will simply overwrite the tokens, and the shell will instantly restyle itself 
                without rewriting the layout.
              </div>
              <div class="callout-footer">
                <button class="ghost-button" data-action="focus-nav-theme">
                  <span>Jump to theme-related navigation</span>
                </button>
              </div>
            </div>
            <div class="canvas-metrics">
              <div class="metric-row">
                <span class="metric-label"><span class="dot ok"></span>Tokenization</span>
                <span class="metric-value">Shell: ~90%</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot"></span>Legacy artifacts</span>
                <span class="metric-value">0 detected</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot warn"></span>Theme packs installed</span>
                <span class="metric-value">0 / planned</span>
              </div>
              <div class="canvas-footer-note">
                <span>Future: this pane becomes a live preview of theme packs and density presets.</span>
                <span>All configuration remains safe and non-destructive at this stage.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Branding view -->
        <div class="canvas-card shell-view" id="view-branding" style="display:none;">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Branding engine · Shell hooks</div>
              <div class="canvas-subtitle">Logos, wallpapers, and accent colors attach here once prepared.</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">External assets</span>
              <span class="tag">4K-ready</span>
            </div>
          </div>
          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Attachment point</div>
              <div class="callout-title">The shell is waiting for your final brand pack.</div>
              <div class="callout-body">
                When the 4K logos and wallpapers are finalized, the Branding Engine will map them 
                to this shell via a simple configuration file instead of editing the shell directly. 
                That way you can swap brands or update visuals without changing the core OS behaviour.
              </div>
              <div class="callout-footer">
                <button class="ghost-button" data-action="return-dashboard">
                  <span>Back to core shell overview</span>
                </button>
              </div>
            </div>
            <div class="canvas-metrics">
              <div class="metric-row">
                <span class="metric-label"><span class="dot"></span>Brand assets attached</span>
                <span class="metric-value">0</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot"></span>Supported resolutions</span>
                <span class="metric-value">1080p · 4K (planned)</span>
              </div>
              <div class="canvas-footer-note">
                <span>Branding will be wired in via an Update-Pack, not by editing this shell manually.</span>
                <span>This keeps the shell stable while your visual identity evolves.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings view -->
        <div class="canvas-card shell-view" id="view-settings" style="display:none;">
          <div class="canvas-header">
            <div class="canvas-title-block">
              <div class="canvas-title">Shell settings · Safety first</div>
              <div class="canvas-subtitle">High-level switches for behaviour and safeguards (blueprint only).</div>
            </div>
            <div class="canvas-tags">
              <span class="tag">Safe defaults</span>
              <span class="tag">Sandboxed</span>
            </div>
          </div>
          <div class="canvas-grid">
            <div class="callout-card">
              <div class="callout-label">Operational mode</div>
              <div class="callout-title">Right now, this shell is in “display-only” mode.</div>
              <div class="callout-body">
                The current build has no destructive actions, writes no data, and has no external integrations. 
                It is intentionally safe and self-contained so you can explore layouts without risk. 
                Future steps will introduce toggles for permissions, app isolation, and data visibility.
              </div>
              <div class="callout-footer">
                <button class="ghost-button" data-action="return-dashboard">
                  <span>Back to dashboard</span>
                </button>
              </div>
            </div>
            <div class="canvas-metrics">
              <div class="metric-row">
                <span class="metric-label"><span class="dot ok"></span>Destructive actions</span>
                <span class="metric-value">None</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot ok"></span>External APIs</span>
                <span class="metric-value">None</span>
              </div>
              <div class="metric-row">
                <span class="metric-label"><span class="dot ok"></span>Sandbox level</span>
                <span class="metric-value">Maximum</span>
              </div>
              <div class="canvas-footer-note">
                <span>All interactive elements today are internal to this file only.</span>
                <span>Security model can grow later without rewriting the shell layout.</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Side pane -->
      <section class="pane side-pane">
        <div class="pane-header">
          <div>
            <div class="pane-title">Session timeline</div>
            <div class="pane-subtitle">What this shell did · conceptually only</div>
          </div>
          <div class="pill-soft">
            <span>v0.1 · Read-only</span>
          </div>
        </div>

        <div class="stack">
          <div class="mini-card">
            <div class="mini-title-row">
              <span class="mini-title">Shell log (concept)</span>
              <span class="mini-pill">No real data yet</span>
            </div>
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-marker">
                  <div class="timeline-marker-dot"></div>
                </div>
                <div class="timeline-content">
                  <div class="timeline-title">Shell initialized</div>
                  <div class="timeline-meta">Architecture: Core operating environment · All subsystems idle.</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker">
                  <div class="timeline-marker-dot"></div>
                </div>
                <div class="timeline-content">
                  <div class="timeline-title">No modules attached yet</div>
                  <div class="timeline-meta">Waiting for first app docking & theme / branding config.</div>
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-marker">
                  <div class="timeline-marker-dot"></div>
                </div>
                <div class="timeline-content">
                  <div class="timeline-title">Security model</div>
                  <div class="timeline-meta">All actions local to this file · no external calls.</div>
                </div>
              </div>
            </div>
          </div>

          <div class="mini-card">
            <div class="mini-title-row">
              <span class="mini-title">Shell metrics snapshot</span>
              <span class="mini-pill">Placeholder metrics</span>
            </div>
            <div class="mini-grid">
              <div class="mini-stat">
                <span class="mini-stat-label">Apps docked</span>
                <span class="mini-stat-value">0</span>
                <span class="mini-stat-foot">Ready for first module</span>
              </div>
              <div class="mini-stat">
                <span class="mini-stat-label">Update-packs</span>
                <span class="mini-stat-value">0</span>
                <span class="mini-stat-foot">Workflow defined</span>
              </div>
              <div class="mini-stat">
                <span class="mini-stat-label">Themes wired</span>
                <span class="mini-stat-value">1*</span>
                <span class="mini-stat-foot">Token-based skeleton</span>
              </div>
              <div class="mini-stat">
                <span class="mini-stat-label">Brand assets</span>
                <span class="mini-stat-value">0</span>
                <span class="mini-stat-foot">Logos pending</span>
              </div>
            </div>
          </div>

          <div class="mini-card">
            <div class="mini-title-row">
              <span class="mini-title">Next steps (suggested)</span>
            </div>
            <ul style="margin: 0; padding-left: 18px; font-size: 11px; color: var(--text-soft-2); display:flex; flex-direction:column; gap:3px;">
              <li>Choose first “resident” app for the shell (Dashboard, Estimator, etc.).</li>
              <li>Finalize 4K logo pack and plug into Branding Engine later.</li>
              <li>Define first workspace layout (“Estimator cockpit” or similar).</li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    <footer class="status-bar">
      <div class="status-bar-left">
        <span>Core Operating Environment</span>
        <span class="status-pill">
          <span class="dot"></span>
          <span>Shell online · Safe mode</span>
        </span>
        <span>Update-pack: waiting</span>
      </div>
      <div class="status-bar-right">
        <span>Ctrl + K: Command center</span>
        <span>Views: System · Workspaces · Apps · Theme · Branding · Settings</span>
      </div>
    </footer>
  </div>

  <script>
    // Clock
    function updateClock() {
      var clock = document.getElementById("clock");
      var now = new Date();
      var hours = now.getHours();
      var minutes = now.getMinutes();
      var h = hours.toString().padStart(2, "0");
      var m = minutes.toString().padStart(2, "0");
      clock.textContent = h + ":" + m;
    }
    updateClock();
    setInterval(updateClock, 30000);

    // Navigation and views
    var navItems = Array.prototype.slice.call(document.querySelectorAll(".nav-item"));
    var views = Array.prototype.slice.call(document.querySelectorAll(".shell-view"));

    function setActiveView(targetId) {
      views.forEach(function(v) {
        if (v.id === targetId) {
          v.style.display = "";
        } else {
          v.style.display = "none";
        }
      });
      navItems.forEach(function(item) {
        var t = item.getAttribute("data-target");
        item.setAttribute("data-active", t === targetId ? "true" : "false");
      });
    }

    navItems.forEach(function(item) {
      item.addEventListener("click", function() {
        var target = item.getAttribute("data-target");
        if (target) {
          setActiveView(target);
        }
      });
    });

    // Quick-launch tiles
    var quickTiles = Array.prototype.slice.call(document.querySelectorAll(".quick-tile"));
    quickTiles.forEach(function(tile) {
      tile.addEventListener("click", function() {
        var target = tile.getAttribute("data-target");
        if (target) {
          setActiveView(target);
        }
      });
    });

    // Focus helpers from buttons
    document.querySelectorAll("[data-action='focus-nav-system']").forEach(function(btn) {
      btn.addEventListener("click", function() {
        setActiveView("view-dashboard");
        var systemNav = document.querySelector(".nav-section-label");
        if (systemNav) {
          systemNav.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    document.querySelectorAll("[data-action='focus-nav-theme']").forEach(function(btn) {
      btn.addEventListener("click", function() {
        setActiveView("view-theme");
        var themeNav = document.querySelector(".nav-item[data-target='view-theme']");
        if (themeNav) {
          themeNav.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      });
    });

    document.querySelectorAll("[data-action='return-dashboard']").forEach(function(btn) {
      btn.addEventListener("click", function() {
        setActiveView("view-dashboard");
      });
    });

    // Command center overlay
    var commandOverlay = document.getElementById("commandOverlay");
    var commandInput = document.getElementById("commandInput");
    var commandList = document.getElementById("commandList");
    var commandItemsData = [
      {
        id: "cmd-dashboard",
        label: "Go to core shell dashboard",
        sub: "Switch main view to System overview",
        action: function() { setActiveView("view-dashboard"); }
      },
      {
        id: "cmd-workspaces",
        label: "Open workspace switcher blueprint",
        sub: "Preview how role-based desktops will behave",
        action: function() { setActiveView("view-workspaces"); }
      },
      {
        id: "cmd-apps",
        label: "Review shell apps docking plan",
        sub: "Decide which module becomes the first resident",
        action: function() { setActiveView("view-apps"); }
      },
      {
        id: "cmd-theme",
        label: "Inspect theme engine hooks",
        sub: "View token-based styling skeleton",
        action: function() { setActiveView("view-theme"); }
      },
      {
        id: "cmd-branding",
        label: "Inspect branding engine hooks",
        sub: "Future attachment point for logos & wallpapers",
        action: function() { setActiveView("view-branding"); }
      },
      {
        id: "cmd-settings",
        label: "View shell safety settings blueprint",
        sub: "Review non-destructive, sandboxed defaults",
        action: function() { setActiveView("view-settings"); }
      }
    ];

    function renderCommands(filter) {
      var f = (filter || "").toLowerCase();
      commandList.innerHTML = "";
      var filtered = commandItemsData.filter(function(cmd) {
        if (!f) return true;
        return cmd.label.toLowerCase().indexOf(f) !== -1 ||
               cmd.sub.toLowerCase().indexOf(f) !== -1;
      });
      if (!filtered.length) {
        var emptyDiv = document.createElement("div");
        emptyDiv.className = "command-item";
        emptyDiv.innerHTML = "<div class='command-item-main'><div class='command-item-title'>No commands match.</div><div class='command-item-sub'>Try “shell”, “theme”, “apps”, or “workspace”.</div></div>";
        commandList.appendChild(emptyDiv);
        return;
      }
      filtered.forEach(function(cmd, index) {
        var item = document.createElement("div");
        item.className = "command-item";
        if (index === 0) {
          item.setAttribute("data-active", "true");
        }
        item.setAttribute("data-id", cmd.id);
        var main = document.createElement("div");
        main.className = "command-item-main";
        var title = document.createElement("div");
        title.className = "command-item-title";
        title.textContent = cmd.label;
        var sub = document.createElement("div");
        sub.className = "command-item-sub";
        sub.textContent = cmd.sub;
        main.appendChild(title);
        main.appendChild(sub);
        var kbd = document.createElement("div");
        kbd.className = "command-item-kbd";
        kbd.textContent = "Enter";
        item.appendChild(main);
        item.appendChild(kbd);
        item.addEventListener("click", function() {
          runCommand(cmd.id);
        });
        commandList.appendChild(item);
      });
    }

    function openCommandPalette() {
      commandOverlay.setAttribute("data-open", "true");
      renderCommands("");
      commandInput.value = "";
      commandInput.focus();
    }

    function closeCommandPalette() {
      commandOverlay.setAttribute("data-open", "false");
    }

    function runCommand(id) {
      var cmd = commandItemsData.find(function(c) { return c.id === id; });
      if (cmd && typeof cmd.action === "function") {
        cmd.action();
      }
      closeCommandPalette();
    }

    function getActiveCommandElement() {
      return commandList.querySelector(".command-item[data-active='true']");
    }

    function moveCommandSelection(direction) {
      var items = Array.prototype.slice.call(commandList.querySelectorAll(".command-item"));
      if (!items.length) return;
      var idx = items.findIndex(function(el) {
        return el.getAttribute("data-active") === "true";
      });
      if (idx === -1) idx = 0;
      var nextIdx = idx + direction;
      if (nextIdx < 0) nextIdx = items.length - 1;
      if (nextIdx >= items.length) nextIdx = 0;
      items.forEach(function(el, i) {
        el.setAttribute("data-active", i === nextIdx ? "true" : "false");
      });
      var active = items[nextIdx];
      if (active && active.scrollIntoView) {
        active.scrollIntoView({ block: "nearest" });
      }
    }

    commandInput.addEventListener("input", function() {
      renderCommands(commandInput.value);
    });

    document.addEventListener("keydown", function(evt) {
      var key = evt.key;

      // Ctrl + K or Cmd + K toggles command palette
      if ((evt.ctrlKey || evt.metaKey) && (key === "k" || key === "K")) {
        evt.preventDefault();
        if (commandOverlay.getAttribute("data-open") === "true") {
          closeCommandPalette();
        } else {
          openCommandPalette();
        }
        return;
      }

      // Escape closes overlay
      if (key === "Escape" && commandOverlay.getAttribute("data-open") === "true") {
        evt.preventDefault();
        closeCommandPalette();
        return;
      }

      // When palette is open, handle navigation and enter
      if (commandOverlay.getAttribute("data-open") === "true") {
        if (key === "ArrowDown") {
          evt.preventDefault();
          moveCommandSelection(1);
          return;
        }
        if (key === "ArrowUp") {
          evt.preventDefault();
          moveCommandSelection(-1);
          return;
        }
        if (key === "Enter") {
          evt.preventDefault();
          var activeEl = getActiveCommandElement();
          if (activeEl) {
            var id = activeEl.getAttribute("data-id");
            runCommand(id);
          }
          return;
        }
      }
    });

    // Allow clicking on search bar to open command palette
    var searchBar = document.getElementById("searchBar");
    if (searchBar) {
      searchBar.addEventListener("click", function() {
        openCommandPalette();
      });
    }

    // Buttons wired to open command palette
    document.querySelectorAll("[data-action='open-command']").forEach(function(btn) {
      btn.addEventListener("click", function() {
        openCommandPalette();
      });
    });
  </script>
</body>
</html>